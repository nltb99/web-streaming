(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{218:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB9UlEQVRYCe1ZPUsDQRC927tCBE1hI0pAbAP+CTtNFZvjAvkBKawVe7W3SZ2QkMZKbf0PIb3xg4iNYFJZ5C6+heQI581I4LJrMWGGnd3Z3Xnz5u6KiePITxgQBoQBmwy4fwUPgqDoed4F9pWhW9A16CrlG5d/Qu+iKLrsdrtvsElhE6hWq4c4eQstQG3Il1LqpNVqPVLByQTA/B6Y7+HgJtSmjIDjoNlsvmaBUFmLes33/XOMtsEDglOI4/hMG1lKJjCdTo+zDthY47D4DKBtxpeH6x7P9yme78H8sjAM95VSNwB8NF+bjbuz8ddAVgA7PejKBF+Y+iJ4HajT6TzFcVzXdkpJLFwCqTvynVKfRyTxskwkawksA5LbKwlw7JjwSQVMsMzFkApw7JjwSQVMsMzFkApw7JjwSQVMsMzFkApw7JjwSQVMsMzFkApw7JjwSQVMsMzFsFaBWq2W2etBS7PIAU77uASi9OY85+gLNYIg2Fm8UyeFlmZjcW1mk1i4ztwHDmeyhPU8pIym7RAd8OQuJJXYKWOYmidTsgKu6z4kuywbHBYygclkcgXcY6htGaFfek2BIBNA6+/ZcZwKdAS1JfoPjgr134AGRTZNtbPf7w9KpVIbDKxjrl+4DYwm5B1B2ngnQvRKe7BFhAFhQBj4pwz8APVWaxZpmc7WAAAAAElFTkSuQmCC"},219:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB9ElEQVRYCe1ZP0/CUBBvXzsYE2VwMRoT40ril3BTJlyakvABGJw17uruwgyBsDipq9+BsIt/gnExEScHWvy9kBKEXn0M1+dw5K7vuHfv/vyu7XB1HPkJAoKAIGATAfev4EEQ7Hiedw67EngDvALmpG84/wDfRlF00el0XiGTlFlApVI5wMkbcAFsgz6VUsfNZvOBCk4WAOR3gXwXB9fBNmmIPPYbjcZLWhIqTal1vu+fYbWdPFJwCnEcn2ohjckCxuPxUdoBG7qsXPyMhDZT9u5wT57gnuwne2EY7imlrhHkMNExrNuUT7IDOOCBfxHeCrXZ5PVmu91+jOO4pmVGXsgliZVVQGIzXalXGop4nhrlLCxVQM65GYWTAoxgYjSSDjCCa+RaOmAEE6ORdIARXCPX0gEjmBiNpAOM4Bq5lg4YwcRoJB1gBNfItXTACCZGI+kAI7hGrpfqQLVaTZ3PYAy5YxSNwSirgGg+HuZC9SAItmb1uiiMIeuzOgZ5IZckRtZk7h1G84iXMGgdYGqNrQmhqInAex1Q7skOuK57Tx3KW5+VC1nAaDS6RKJfYNs0xOz1ikqCLABjxCfHccrgIdgW6Q8cZerbgE6KHJrqzV6v1y8Wiy0gsIr/+uFdw5oHvSFIC89XiLlrF7KQICAICAL/FIEfMKVrFh2WgR0AAAAASUVORK5CYII="},291:function(e,t,a){},292:function(e,t,a){},337:function(e,t,a){e.exports=a.p+"static/media/donate.e6202de5.mp3"},347:function(e,t,a){e.exports=a.p+"static/media/brand.ea52cb6a.png"},356:function(e,t,a){e.exports=a(852)},383:function(e,t){},386:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=386},394:function(e,t){},417:function(e,t,a){e.exports=a.p+"static/media/Avatar.5cab294f.png"},433:function(e,t){},435:function(e,t){},459:function(e,t){},461:function(e,t){},489:function(e,t){},491:function(e,t){},492:function(e,t){},497:function(e,t){},499:function(e,t){},505:function(e,t){},507:function(e,t){},526:function(e,t){},538:function(e,t){},541:function(e,t){},64:function(e,t,a){e.exports=a.p+"static/media/face_.2b634f63.png"},69:function(e,t,a){e.exports=a.p+"static/media/3.d538b3ce.png"},844:function(e,t,a){},845:function(e,t,a){},852:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(33),i=a.n(o),c=a(24),s=a(32),l=a(5),u=a.n(l),d=a(10),m=a(9),p=a(67),f=a.n(p),v=a(22),h="https://bavk-api.herokuapp.com",b="https://bavk-api.herokuapp.com",g=h+"/api/image",y=h+"/api/avatar/",E=function(e){try{var t=localStorage.getItem("jwt");if(t)return"".concat(e?"Bearer ":"").concat(JSON.parse(t))}catch(a){}return null},x=function(e){return new URLSearchParams(window.location.search).get(e)};var w=function(e,t,a){var n;return function(){var r=this,o=arguments,i=a&&!n;clearTimeout(n),n=setTimeout((function(){n=null,a||e.apply(r,o)}),t),i&&e.apply(r,o)}},k=["#32CD32","#FF5F1F","#4F7942","#F88379","#4169E1","#770737","#32CD32","#0F52BA","#4682B4","#FF4433","#9F2B68","#FA5F55","#FA8072","#FFAA33","#F4BB44","#088F8F","#097969","#228B22","#40B5AD","#6495ED","#0818A8","#E3735E","#FF3131"],j=function(){return k[Math.random()*k.length|0]},O={userInfo:{}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USERINFO":return Object(v.a)(Object(v.a)({},e),{},{userInfo:t.userInfo});default:return e}},S=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/credential/login",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/credential/register",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/payment/get_jwt_reset",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/credential/update_password",n);case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("user_info");case 3:if(!(t=e.sent)){e.next=11;break}return e.next=7,JSON.parse(t);case 7:return t=e.sent,e.abrupt("return",t||{});case 11:return e.abrupt("return",{});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===(t=E(!0))){e.next=15;break}return a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t}},e.next=6,fetch("https://bavk-api.herokuapp.com/api/user/user_info",a);case 6:return n=e.sent,e.next=9,n.json();case 9:return r=e.sent,o=Array.isArray(null===r||void 0===r?void 0:r.data)?{}:(null===r||void 0===r?void 0:r.data)||{},localStorage.setItem("user_info",JSON.stringify(o)),e.abrupt("return",(null===r||void 0===r?void 0:r.data)||{});case 15:return localStorage.clear(),sessionStorage.clear(),e.abrupt("return",{});case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),I=function(){return null!==E()},F={roomTags:[],roomsOnline:[]},B=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/tags",n);case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,t({type:"GET_ROOM_TAGS",roomTags:o}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(a,n){var r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},t.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/rooms",r);case 3:return o=t.sent,t.next=6,o.json();case 6:return i=t.sent,a({type:"GET_ROOMS_ONLINE",roomsOnline:i}),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},P=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/on_start",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/on_end",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/room_info",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/snap",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.recordData,n=t.userInfo,(r=new FormData).append("video",a,a.name),o={method:"POST",headers:{title:t.title,user_id:n.id,filename:"".concat(n.id,"_").concat(a.name)},body:r},e.next=6,fetch("https://bavk-api.herokuapp.com/api/stream/save_record",o);case 6:return i=e.sent,e.next=9,i.json();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ROOM_TAGS":return Object(v.a)(Object(v.a)({},e),{},{roomTags:t.roomTags});case"GET_ROOMS_ONLINE":return Object(v.a)(Object(v.a)({},e),{},{roomsOnline:t.roomsOnline});default:return e}},M=a(335),q=new(a.n(M).a),G={on:function(e,t){return q.on(e,t)},once:function(e,t){return q.once(e,t)},off:function(e,t){return q.off(e,t)},emit:function(e,t){return q.emit(e,t)}};Object.freeze(G);var V,H,K,Y,Q,X,Z,$=G,ee=a(336),te=a(337),ae=a.n(te),ne=function(){var e=Object(ee.a)(ae.a),t=Object(m.a)(e,1)[0],a=Object(n.useRef)(null);return Object(n.useEffect)((function(){$.on("play_audio_donate",(function(){a.current.click()}))}),[]),r.a.createElement("button",{ref:a,onClick:t,style:{display:"none"}})},re=function(){$.emit("play_audio_donate",{})},oe=a(30),ie=a(137),ce=a.n(ie),se=a(71),le={position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},ue=function(){return Object(n.useEffect)((function(){$.on("show_toast",function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.message,n=t.type,r=t.customConfigs,Object.assign(le,r||{}),e.t0=n,e.next="info"===e.t0?5:"success"===e.t0?7:"warn"===e.t0?9:"error"===e.t0?11:"dark"===e.t0?13:15;break;case 5:return se.b.info(a,le),e.abrupt("break",17);case 7:return se.b.success(a,le),e.abrupt("break",17);case 9:return se.b.warn(a,le),e.abrupt("break",17);case 11:return se.b.error(a,le),e.abrupt("break",17);case 13:return se.b.dark(a,le),e.abrupt("break",17);case 15:return Object(se.b)(a,le),e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(se.a,{position:"top-right",draggable:!0,autoClose:3e3,pauseOnFocusLoss:!0,hideProgressBar:!0,closeOnClick:!0,newestOnTop:!1,pauseOnHover:!0,rtl:!1})},de=function(e,t,a){"string"!==typeof t&&(t=JSON.stringify(t)),$.emit("show_toast",{type:e,message:t,customConfigs:a})},me=a(338),pe=a(339),fe=a.n(pe),ve=a(11),he=Object(ve.css)(V||(V=Object(me.a)(["\n    position:fixed;\n    top:50%;\n    left:50%;\n    z-index:100000;\n    transform:translate(-50%,-50%);\n"]))),be=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){$.on("show_loading",function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.boolean,o(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(fe.a,{color:"black",loading:a,css:he,size:50})},ge=function(e){$.emit("show_loading",{boolean:e})},ye=function(e){var t=e.text;return r.a.createElement("div",{style:{pointerEvents:"none"}},r.a.createElement("h2",{className:"brand_styling text_primary",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"70vh"}},t||"Not Found"))},Ee=a(79),xe=a(93),we=a(340),ke=a(353),je=a(46),Oe=a.n(je),Ne=function(e){var t=e.roomName,a=e.userChat,o=Object(n.useState)([]),i=Object(m.a)(o,2),c=i[0],s=(i[1],Object(n.useState)({})),l=Object(m.a)(s,2),u=l[0],d=(l[1],Object(n.useState)(!1)),p=Object(m.a)(d,2),v=(p[0],p[1]);Object(n.useEffect)((function(){(H=f()(b)).emit("join",{userChat:a,roomName:t}),H.on("message",(function(e){try{c.push(e),v((function(e){return!e})),document.querySelector("#chatbox_scroll_frame").scrollTo(0,document.querySelector("#chatbox_scroll_frame").scrollHeight)}catch(t){console.log(t)}})),H.on("error",(function(e){var t=e.message;de("error",t)}))}),[]);return r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",overflowY:"scroll"}},r.a.createElement("div",{id:"chatbox_scroll_frame",className:"px-3",style:{height:"89%",overflowY:"scroll"}},Se({messages:c,roomName:t})),r.a.createElement("div",{className:"px-3",style:{marginBottom:10,background:"transparent"}},r.a.createElement("input",{className:"mt-2 text-light shadow text_primary",style:{background:"rgba(66,68,73,0.7)",border:"none",outline:"none",width:"100%",padding:10,height:40,borderRadius:5,boxShadow:"0px 0px 3px black"},placeholder:"Chat...",value:u.message||"",onChange:function(e){return t=e.target.value,u["message"]=t,void v((function(e){return!e}));var t},onKeyUp:function(e){return"Enter"===e.key&&function(){var e,n;if(0!==(null===u||void 0===u||null===(e=u.message)||void 0===e||null===(n=e.trim())||void 0===n?void 0:n.length)){var r=u.message;H.emit("sendMessage",{message:r,userChat:a,roomName:t,colorRand:j(),createdAt:Oe()()}),u.message=""}}()}})))},Se=function(e){var t=e.messages,a=e.roomName,n=function(e){window.open(function(e){return"/profile/"+e}(e))};return t.map((function(e,t){return r.a.createElement("div",{key:t},void 0!==e.helloText&&r.a.createElement("div",{className:"text-center py-2 text_primary"},r.a.createElement("span",null,e.helloText),r.a.createElement("span",{style:{cursor:"pointer",fontWeight:"bold"},onClick:function(){return n(a)}},a," "),r.a.createElement("span",null," room")),void 0!==e.welcomeText&&r.a.createElement("div",{className:"text-secondary text_primary"},r.a.createElement("span",{style:{cursor:"pointer",fontWeight:"bold"},onClick:function(){return n(e.userChat)}},e.userChat),r.a.createElement("span",null,e.welcomeText)),void 0!==e.message&&r.a.createElement("div",{className:"py-2",style:{wordBreak:"break-all"}},r.a.createElement("div",{className:"text_primary"},r.a.createElement("span",{style:{cursor:"pointer",fontWeight:"bold",color:e.colorRand},onClick:function(){return n(e.userChat)}},e.userChat," (",Oe()(e.createdAt).format("LT"),")"),": ",r.a.createElement("span",null,e.message))))}))},_e=a(69),Ce=a.n(_e),Te=a(136),Ae=a(141),Re=(a(402),a(404),Object(we.a)()),Ie=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var Fe,Be,De=function(){var e,t=Object(n.useState)(!0),o=Object(m.a)(t,2),i=o[0],c=o[1],l=Object(n.useState)({}),p=Object(m.a)(l,2),v=p[0],h=(p[1],Object(n.useState)(!0)),g=Object(m.a)(h,2),y=g[0],E=g[1],x=Object(n.useState)({}),k=Object(m.a)(x,2),O=k[0],N=k[1],S=Object(n.useState)([]),_=Object(m.a)(S,2),C=_[0],T=_[1],R=Object(n.useState)([]),I=Object(m.a)(R,2),F=I[0],D=I[1],W=Object(n.useState)(!1),M=Object(m.a)(W,2),q=(M[0],M[1]),G=Object(n.useState)(0),V=Object(m.a)(G,2),H=V[0],$=V[1],ee=Object(n.useState)(!1),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],ie=Object(n.useState)({}),se=Object(m.a)(ie,2),le=se[0],ue=se[1],me=Object(n.useState)(!0),pe=Object(m.a)(me,2),fe=pe[0],ve=pe[1],he=Object(xe.b)(),be=Object(n.useRef)(0),we=Object(n.useRef)({}),je=Object(n.useState)(!1),Se=Object(m.a)(je,2),_e=Se[0],Fe=Se[1],Be=Object(n.useState)(!1),De=Object(m.a)(Be,2),Pe=De[0],ze=De[1],Le=Object(n.useState)(!1),Ue=Object(m.a)(Le,2),Je=Ue[0],We=Ue[1],Me=Object(s.f)(),qe=Object(n.useRef)(null),Ge=function(e,t){v[t]=e,D(e),q((function(e){return!e}))},Ve=function(e){var t=document.getElementById("snap-video");t.srcObject=e,t.play().then(Ye)},He=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,o,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.nickname,n=t.id,r=v.description,o=v.title,i=v.tags,c={user_id:n,title:o||"title",description:r||"description",tags:i?JSON.stringify(i):"[]",thumbnail:""},e.next=6,P(c);case 6:200===(s=e.sent).status?((Z=new ce.a(a)).on("open",(function(e){try{console.log("Peer Connected with ID: ",e),de("info","Your image is being streaming!"),ne(!0),K.emit("open_room",{nickname:a}),we.current=null===s||void 0===s?void 0:s.data,q((function(e){return!e})),Ie({video:!0,audio:!1},(function(e){Ve(Y=e)}),(function(e){de("error",e)}))}catch(t){console.log(t),Ke()}})),Z.on("call",(function(e){e.answer(Y)})),Z.on("connection",(function(e){console.log(e,"connection")}))):(de("error","Error start stream!"),Ke()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),de("error",e.t0),Ke();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=we.current||{},a=t.id,n=t.streamer,r=t.streamer_id,o={room_id:a,streamer_id:r,status:0},e.next=4,z(o);case 4:i="User ".concat(n," has ended the live stream"),c="User ".concat(n," has ended the live stream"),K.emit("on_donate",{streamer:n,message:i,isDonate:!1}),K.emit("sendMessage",{message:c,userChat:n,roomName:n,colorRand:j(),createdAt:Oe()()});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent;try{X=setInterval((function(){var e=document.getElementById("snap-video"),a=document.createElement("canvas");a.width=500,a.height=500,a.getContext("2d").drawImage(e,0,0,a.width,a.height),a.toBlob((function(e){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){var e=a.result,n={fileName:"".concat(t.id,"_").concat(t.nickname,".png"),imageBase64:e,user_id:t.id};U(n)}}))}),2e3)}catch(a){console.log(a)}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),E(!0),e.prev=2,e.next=5,A();case 5:if(a=e.sent,N(a),void 0!==a.id){e.next=12;break}return ve(!1),ge(!1),E(!1),e.abrupt("return");case 12:if("VIEWER"!==a.role_user){e.next=17;break}return window.location.href="/",ge(!1),E(!1),e.abrupt("return");case 17:return e.next=19,he(B());case 19:return n=e.sent,T((null===n||void 0===n?void 0:n.data)||[]),e.next=23,L({roomName:a.nickname,idUser:a.id});case 23:r=e.sent,D(JSON.parse(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.tags)||[]),ue((null===r||void 0===r?void 0:r.data)||{}),(K=f()(b)).emit("open_donate_room",{nickname:a.nickname}),K.on("message_donate",w((function(e){var t=e.message;e.isDonate&&(de("dark",t,{position:"bottom-center"}),re())}))),K.on("update_viewer_watching",(function(e){var t=e.currentViewers;$(t)})),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),console.log(e.t0);case 35:ge(!1),E(!1);case 37:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.title&&v.thumbnail){e.next=2;break}return e.abrupt("return");case 2:return ge(!0),e.prev=3,e.next=6,A();case 6:return t=e.sent,a={userInfo:t,title:v.title,recordData:Q.recordedData},Q.record().reset(),e.next=11,J(a);case 11:200===(n=e.sent).status?((r=new FileReader).readAsDataURL(v.thumbnail),r.onload=Object(d.a)(u.a.mark((function e(){var a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id,fileName:(null===v||void 0===v||null===(a=v.thumbnail)||void 0===a?void 0:a.name)||"",imageBase64:r.result})},e.next=3,fetch("https://bavk-api.herokuapp.com/api/stream/save_record_snap",o);case 3:de("success",n.msg),Fe(!1);case 5:case"end":return e.stop()}}),e)})))):de("error",n.msg),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:ge(!1);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}Q.record().reset(),e.next=10;break;case 4:return e.t0=He,e.next=7,A();case 7:e.t1=e.sent,(0,e.t0)(e.t1),$e();case 10:Fe(!1),ze(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){try{(Q=Object(Te.default)("local-video",{controls:!0,fluid:!0,plugins:{record:{audio:!0,video:!0,maxLength:3600,convertEngine:"ts-ebml"}}})).on("error",(function(e){console.log("error:",e)})),Q.on("play",Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be.current=1,q((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})))),Q.on("pause",(function(){console.log("pause"),be.current=0,q((function(e){return!e}))})),Q.on("suspend",(function(){console.log("suspend"),be.current=0,q((function(e){return!e}))})),Q.on("abort",(function(){console.log("abort"),be.current=0,q((function(e){return!e}))})),Q.on("finishRecord",Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:We(!0),Fe(!0);case 2:case"end":return e.stop()}}),e)}))))}catch(e){de("error",e)}};return Object(n.useEffect)((function(){return Qe(),Me.listen((function(){try{1===be.current&&(Ke(),window.location.reload()),clearInterval(X),Q.dispose()}catch(e){}}))}),[Me]),fe||y?!y&&r.a.createElement("div",{className:"container-fluid d-flex flex-row m-auto p-4",style:{zIndex:999,pointerEvents:"auto"}},ae&&r.a.createElement(Ae.a,{onBeforeunload:function(e){e.preventDefault(),Ke(),window.location.reload()}}),r.a.createElement("div",{className:"w-100",style:{borderRadius:15}},r.a.createElement("div",{className:"d-flex",style:{position:"relative"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"}},r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement("div",{style:{display:"none"}},r.a.createElement("video",{id:"snap-video"})),r.a.createElement("video",{id:"local-video",className:"video-js",style:{minWidth:"100%",minHeight:"80vh",maxHeight:"100%",margin:"auto"}})),ae&&r.a.createElement("div",{style:{background:"rgba(33, 33, 33, 0.5)",height:130,padding:20,paddingLeft:20,marginTop:20,borderRadius:5,display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("span",{className:"text_primary",style:{fontSize:19}},r.a.createElement(oe.f,{style:{marginRight:10}}),v.title||"title"),r.a.createElement("span",{className:"text_primary",style:{fontSize:19}},r.a.createElement(oe.a,{style:{marginRight:10}})," ",Oe()(null===we||void 0===we||null===(e=we.current)||void 0===e?void 0:e.created_at).endOf("min").fromNow()),r.a.createElement("span",{className:"text_primary",style:{fontSize:19}},r.a.createElement(oe.h,{style:{marginRight:10}})," ",H))),Pe?null:r.a.createElement("div",{className:"px-3 d-flex flex-column w-100 h-100 align-items-center justify-content-center",style:{position:"absolute",top:0,left:0}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,r.a.createElement("button",{className:"w-100 btn btn-outline-primary btn-lg",onClick:function(){Fe(!0)}},"Start")))),r.a.createElement("div",{onClick:function(){c(!i)},className:i?"collapse":"text-center mx-2 py-2 text-light",style:{width:30,height:30,cursor:"pointer",position:"absolute",right:0,top:0,opacity:.5}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{className:"m-auto",src:a(218),alt:"",style:{height:30,width:30}}))))),r.a.createElement("div",{className:i?"ml-3 shadow":"collapse",style:{position:"relative",minWidth:300,background:"rgb(33,33,33,0.5)",borderRadius:10}},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",right:0,top:0}},r.a.createElement("div",{className:"d-flex flex-column",style:{position:"relative",height:"100%"}},r.a.createElement("div",{className:"px-3"},r.a.createElement("div",{className:"border-bottom w-100 d-flex justify-content-end py-2"},r.a.createElement("div",{className:"align-self-center"},r.a.createElement("img",{className:"m-auto",src:a(219),alt:"",style:{width:28,cursor:"pointer"},onClick:function(){c(!i)}})))),(null===O||void 0===O?void 0:O.nickname)?r.a.createElement(Ne,{roomName:O.nickname,userChat:O.nickname}):r.a.createElement(r.a.Fragment,null)))),r.a.createElement(Ee.a,{open:_e,center:!0,onClose:function(){return Ze()}},r.a.createElement("div",{className:"row py-4 px-0",style:{minWidth:"50vw",maxWidth:"50vw"}},r.a.createElement("div",{className:"py-3",style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"space-around",justifyContent:"space-around"}},r.a.createElement("div",{className:"w-75"},r.a.createElement("input",{className:"border form-control",value:v.title,placeholder:"Title...",onChange:function(e){return Ge(e.target.value,"title")}}))),Je?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"py-3",style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"space-around",justifyContent:"space-around"}},r.a.createElement("div",{className:"w-75 m-auto d-flex align-items-center"},r.a.createElement("div",{className:"d-flex",style:{width:"30%"}},r.a.createElement("h4",null,"Thumbnail")),r.a.createElement("div",{className:"",style:{width:"70%",display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{position:"relative",width:300,height:200}},r.a.createElement("img",{src:(null===v||void 0===v?void 0:v.thumbnail)?URL.createObjectURL(null===v||void 0===v?void 0:v.thumbnail):Ce.a,alt:"",style:{width:"100%",height:"100%",borderRadius:10,objectFit:"cover"}}),r.a.createElement("button",{onClick:function(){var e;return null===qe||void 0===qe||null===(e=qe.current)||void 0===e?void 0:e.click()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}}),r.a.createElement("input",{ref:qe,type:"file",onChange:function(e){e.target.files&&e.target.files[0]&&(v.thumbnail=e.target.files[0],q((function(e){return!e})))},style:{display:"none"}})))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"py-3",style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"space-around",justifyContent:"space-around"}},r.a.createElement("div",{className:"w-75"},r.a.createElement("textarea",{className:"border form-control",defaultValue:le.description,style:{width:"100%",height:100},onChange:function(e){return Ge(e.target.value,"description")},placeholder:"Description..."}))),r.a.createElement("div",{className:"py-3",style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"space-around",justifyContent:"space-around"}},r.a.createElement("div",{className:"w-75"},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(ke.a,{options:C,onChange:function(e){return Ge(e,"tags")},closeMenuOnSelect:!1,components:Re,isMulti:!0,placeholder:"Tags...",value:F}))))),r.a.createElement("div",{className:"pt-3",style:{width:"75%",display:"flex",justifyContent:"flex-end",margin:"auto"}},r.a.createElement("div",{className:"pl-1"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return Ze(Je)}},"Cancel")),r.a.createElement("div",{className:"pl-1"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return Je?Xe():Ze()}},"Finish")))))):r.a.createElement(ye,{text:"Login Required"})},Pe=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch("https://bavk-api.herokuapp.com/api/user/subscribe",a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/user/save_avatar",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"Content-Type":"application/json",nickname:t,host_id:a}},e.next=4,fetch("https://bavk-api.herokuapp.com/api/user/profile",n);case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",(null===o||void 0===o?void 0:o.data)||{});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/user/update_profile",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})},e.next=3,fetch("https://bavk-api.herokuapp.com/api/user/update_role",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"GET",headers:{"Content-Type":"application/json",userid:t}},e.next=4,fetch("https://bavk-api.herokuapp.com/api/user/donate_history",a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",(null===r||void 0===r?void 0:r.data)||[]);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/user/all_users",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var Ge=function(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),o=t[0],i=t[1],c=Object(n.useState)({}),l=Object(m.a)(c,2),p=l[0],h=l[1],x=Object(n.useState)(0),k=Object(m.a)(x,2),j=k[0],O=k[1],N=Object(n.useState)(!0),S=Object(m.a)(N,2),_=S[0],C=S[1],T=Object(n.useState)(!0),R=Object(m.a)(T,2),F=R[0],B=R[1],D=Object(n.useState)(!1),P=Object(m.a)(D,2),z=P[0],U=P[1],J=Object(n.useState)({}),W=Object(m.a)(J,2),M=(W[0],W[1],Object(n.useState)(!1)),q=Object(m.a)(M,2),G=q[0],V=q[1],H=Object(s.f)(),K=function(e){Y(!0);try{var t=e.nickname,a=new ce.a;a.on("open",(function(n){console.log("Connected with Id: "+n),U(!0),qe({video:!0,audio:!0},(function(n){n;var r=a.call(t,n);Fe.emit("user_connect_room",{roomInfo:e}),r.on("stream",(function(e){Q(e)}))}),(function(e){return console.log(e)})),Y(!1)}))}catch(n){de("error",n),Y(!1)}},Y=function(e){ge(e),C(e)},Q=function(e){var t=document.getElementById("remote-video");t.srcObject=e,t.play()},X=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I()){e.next=3;break}return $.emit("login_required",{}),e.abrupt("return");case 3:return t={host_id:o.streamer_id,follower_id:p.id,isSubscribed:o.isSubscribed},e.next=6,Pe(t);case 6:200===(a=e.sent).status?(i(Object(v.a)(Object(v.a)({},o),{},{isSubscribed:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.isSubscribed})),de("info",a.msg)):de("error",a.msg);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,c,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,A();case 4:return r=e.sent,h(r),o=null===(t=window.location)||void 0===t||null===(a=t.pathname)||void 0===a||null===(n=a.match(/(?<=\/user\/)[\w].*/g))||void 0===n?void 0:n[0],c={roomName:o,idUser:(null===r||void 0===r?void 0:r.id)||-1},e.next=10,L(c);case 10:200===(s=e.sent).status&&((l=(null===s||void 0===s?void 0:s.data)||{}).tags=""!==l.tags&&void 0!==l.tags?JSON.parse(l.tags):[],i(l),O(l.viewers||0),void 0!==l.streamer_id&&1===l.room_status&&K(l),(Fe=f()(b)).emit("open_donate_room",{nickname:o}),Fe.on("message_donate",w((function(e){var t=e.message,a=e.isDonate;de("dark",t,{position:"bottom-center"}),a&&re()}))),Fe.on("update_viewer_watching",(function(e){var t=e.currentViewers;O(t)}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),de("error",e.t0);case 17:Y(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return(Be=document.createElement("canvas")).width=320,Be.height=180,Z(),H.listen((function(){window.location.reload()}))}),[H]),void 0!==o.streamer_id?r.a.createElement("div",{className:"container-fluid d-flex flex-row m-auto p-4",style:{zIndex:999,pointerEvents:"auto"}},z&&r.a.createElement(Ae.a,{onBeforeunload:function(e){e.preventDefault(),window.location.reload()}}),r.a.createElement("div",{className:"w-100 d-flex flex-column",style:{height:"100%"}},r.a.createElement("div",{className:"d-flex",style:{position:"relative"}},r.a.createElement("video",{id:"remote-video",controls:!0,style:{maxHeight:"80vh",minWidth:"100%",minHeight:350,background:"black"},poster:g+((null===o||void 0===o?void 0:o.thumbnail)||"")}),r.a.createElement("div",{onClick:function(){B(!F)},className:F?"collapse":"text-center mx-2 py-2 text-light",style:{width:30,height:30,cursor:"pointer",position:"absolute",right:0,top:0,opacity:.5}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{className:"m-auto",src:a(218),alt:"",style:{height:30,width:30}})))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("div",{className:"d-flex shadow p-3",style:{minHeight:120,maxHeight:200,borderRadius:15,background:"rgb(33,33,33,0.5)"}},r.a.createElement("div",{className:"d-flex w-100"},r.a.createElement("div",{className:"d-flex w-100"},r.a.createElement("div",{className:"d-flex mr-3",style:{width:100,flexDirection:"column",alignItems:"center"}},r.a.createElement("img",{className:"m-auto",src:(null===o||void 0===o?void 0:o.photo)?y+o.photo:a(417),alt:"",style:{height:70,width:70,borderRadius:"50%",cursor:"pointer",objectFit:"cover"}}),r.a.createElement("span",{style:{color:"lightgreen"}},o.nickname||"nickname")),r.a.createElement("div",{className:"d-flex flex-column m-auto px-3 border-bottom w-100"},r.a.createElement("div",null,r.a.createElement("h4",{className:"font-weight-bold text_primary"},o.title||"title")),r.a.createElement("div",{className:"py-1 text_primary"},r.a.createElement("div",{style:{height:100,maxWidth:200,display:"inline"}},(null===o||void 0===o?void 0:o.description)||"description")," | ",r.a.createElement("span",{className:"text-secondary"},Oe()(null===o||void 0===o?void 0:o.created_at).endOf("min").fromNow())),r.a.createElement("div",{className:"d-flex flex-row py-1"},r.a.createElement("div",{className:"d-flex align-items-center w-100 text-light"},o.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"list_video_tags py-1 px-2",style:{fontSize:12}},r.a.createElement("li",null,e.label))}))),r.a.createElement("div",{className:"d-flex justify-content-end w-100 text-light"},r.a.createElement("div",{className:"py-1 px-2 d-flex align-items-center",style:{fontSize:18}},r.a.createElement(oe.h,null),r.a.createElement("div",{className:"px-2"},j)),r.a.createElement("div",{className:"py-1 px-2 d-flex align-items-center interaction_bar_icon",onClick:function(){try{o.likes+=1,fetch("https://bavk-api.herokuapp.com/api/stream/like",{body:JSON.stringify({streamer_id:o.streamer_id,likes:o.likes}),method:"POST",headers:{"Content-Type":"application/json"}}),V(!G)}catch(e){}},style:{cursor:"pointer",fontSize:18}},r.a.createElement(oe.k,null),r.a.createElement("div",{className:"px-2"},o.likes)),r.a.createElement("div",{className:"py-1 px-2 d-flex align-items-center interaction_bar_icon",onClick:X,style:{cursor:"pointer",fontSize:18}},r.a.createElement(oe.i,null),r.a.createElement("div",{className:"px-2"},o.isSubscribed?"Unfollow":"Follow")),r.a.createElement("div",{className:"py-1 px-2 d-flex align-items-center interaction_bar_icon",onClick:function(){if(I()){var e=o.streamer_id,t=o.nickname;window.open("/donation?streamer_id=".concat(e,"&streamer=").concat(t,"&viewer=").concat(p.nickname,"&q=").concat(E()),"_blank")}else $.emit("login_required",{})},style:{cursor:"pointer",fontSize:18}},r.a.createElement(oe.c,null),r.a.createElement("div",{className:"px-2"},"Donate")))))))))),r.a.createElement("div",{className:F?"ml-3 shadow":"collapse",style:{position:"relative",minWidth:300,background:"rgb(33,33,33,0.5)",borderRadius:10}},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",right:0,top:0}},r.a.createElement("div",{className:"d-flex flex-column",style:{position:"relative",height:"100%"}},r.a.createElement("div",{className:"px-3"},r.a.createElement("div",{className:"border-bottom w-100 d-flex justify-content-end py-2"},r.a.createElement("div",{className:"align-self-center"},r.a.createElement("img",{className:"m-auto",src:a(219),alt:"",style:{width:28,cursor:"pointer"},onClick:function(){B(!F)}})))),(null===p||void 0===p?void 0:p.nickname)?r.a.createElement(Ne,{roomName:o.nickname,userChat:p.nickname}):r.a.createElement(r.a.Fragment,null))))):!_&&r.a.createElement(ye,null)},Ve=a(92),He=a(64),Ke=a.n(He),Ye=function(e){Object(Ve.a)(e);var t=Object(n.useState)([]),a=Object(m.a)(t,2),o=a[0],i=a[1],s=Object(n.useState)(!0),l=Object(m.a)(s,2),p=l[0],f=l[1],v=Object(xe.b)(),h=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),f(!0),e.prev=2,e.next=5,v(D({search:x("q")?decodeURI(x("q")):null}));case 5:t=e.sent,i((null===t||void 0===t?void 0:t.data)||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),de("error",e.t0);case 12:ge(!1),f(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){h()}),[]),r.a.createElement(r.a.Fragment,null,o.length>0?r.a.createElement("div",{className:"list_video_container"},o.map((function(e,t){var a=[];try{a=JSON.parse(e.tags||"[]")||[]}catch(n){a=[]}return r.a.createElement(c.b,{to:"/user/".concat(e.nickname),target:"_blank",rel:"noopener noreferrer",key:t,className:"list_video_item",style:{pointerEvents:"auto"}},r.a.createElement("div",{className:"list_video_status"},"LIVE"),r.a.createElement("div",{className:"list_video_viewers"},e.viewers||0," viewers"),r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:(null===e||void 0===e?void 0:e.thumbnail)?g+(null===e||void 0===e?void 0:e.thumbnail):Ce.a,alt:""})),r.a.createElement("div",{className:"list_video_description"},r.a.createElement("img",{src:(null===e||void 0===e?void 0:e.photo)?y+(null===e||void 0===e?void 0:e.photo):Ke.a,alt:"",style:{width:40,height:40,borderRadius:"50%",marginRight:10}}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("span",{className:"text_primary",style:{fontSize:17,fontWeight:"bold"}},e.title),r.a.createElement("span",{className:"text_primary",style:{fontSize:14,fontStyle:"italic"}},e.description),r.a.createElement("span",{className:"text_primary",style:{fontSize:14,color:"lightgreen"}},e.nickname),r.a.createElement("div",{style:{minHeight:30}},Array.isArray(a)&&a.map((function(e,t){return r.a.createElement("span",{key:t,className:"list_video_tags text-white p-1 px-2 text-center text_primary",style:{fontSize:11}},e.label)}))))))}))):!p&&r.a.createElement(ye,{text:"No Rooms Online Found"}))},Qe=a(45),Xe=a(346),Ze=(a(418),function(e){Object(Ve.a)(e);var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],i=a[1],s=Object(n.useState)({}),l=Object(m.a)(s,2),p=l[0],f=l[1],h=Object(n.useState)(!0),b=Object(m.a)(h,2),g=b[0],y=b[1],E=Object(n.useState)(""),w=Object(m.a)(E,2),k=w[0],j=w[1],O=Object(n.useState)({}),N=Object(m.a)(O,2),T=N[0],A=N[1],F=Object(n.useState)(!1),B=Object(m.a)(F,2),D=B[0],P=B[1],z=Object(n.useState)({username:"",password:"",nickname:"",email:"",search:x("q")||""}),L=Object(m.a)(z,2),U=L[0],J=L[1],W=function(e){M(e),i(!0)},M=function(e){f({type:e})},q=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=U.username,n=U.password,a&&n){e.next=5;break}return de("warn","Username or password should not be null"),e.abrupt("return");case 5:return e.next=7,S({username:a,password:n});case 7:200===(r=e.sent).status?(o=(null===r||void 0===r?void 0:r.data)||{},c=o.jwt,s=o.user_info,de("info",r.msg),i(!1),A(s),localStorage.setItem("user_info",JSON.stringify(s)),localStorage.setItem("jwt",JSON.stringify(c)),setTimeout((function(){return window.location.reload()}),1e3)):de("error",r.msg);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=U.username,a=U.password,n=U.nickname,r=U.email,t&&a&&n&&r){e.next=4;break}return de("warn","Info register should not be null"),e.abrupt("return");case 4:if(/^\S+@\S+\.\S+$/g.test(r)){e.next=7;break}return de("warn","Email not in correct format"),e.abrupt("return");case 7:return e.next=9,_({username:t,password:a,nickname:n,email:r});case 9:200===(o=e.sent).status?(de("info",o.msg),M("LOGIN")):de("error",o.msg);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=U.search;switch(k){case"tags":window.location.href="/?q=".concat(encodeURI(e));break;case"members":window.location.href="/members?q=".concat(encodeURI(e));break;case"videos":window.location.href="/videos?q=".concat(encodeURI(e))}},H=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(T.id);case 2:200===e.sent.status&&(de("info","Update successfully!"),setTimeout((function(){return window.location.reload()}),1e3));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge(!0),e.prev=1,t.preventDefault(),a=U.email,/^\S+@\S+\.\S+$/g.test(a)){e.next=8;break}return de("warn","Email not in correct format"),ge(!1),e.abrupt("return");case 8:return e.next=10,C({email:a,host_origin:window.location.origin});case 10:200===e.sent.status?de("info","We have sent an email with a link to reset your password. Please check your inbox ".concat(a,".")):de("error","Request reset password has been failed"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:ge(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){var a,n;"nickname"!==t&&"username"!==t||(e=null===(a=e)||void 0===a||null===(n=a.replace(/\s/g,"_"))||void 0===n?void 0:n.trim());J(Object(v.a)(Object(v.a)({},U),{},Object(Qe.a)({},t,e)))},Q=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),y(!0),e.prev=2,e.next=5,I();case 5:if(!e.sent){e.next=11;break}return P(!0),e.next=9,R();case 9:t=e.sent,A(t||{});case 11:a=window.location.pathname,j("/videos"===a?"videos":"/members"===a?"members":"tags"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:ge(!1),y(!1);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Q(),$.on("login_required",Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W("LOGIN");case 1:case"end":return e.stop()}}),e)}))))}),[]),r.a.createElement(r.a.Fragment,null,!g&&r.a.createElement("div",{style:{padding:10,display:"flex",alignItems:"100%",justifyContent:"space-around",zIndex:2e3,pointerEvents:"none"}},r.a.createElement(c.b,{to:"/",style:{pointerEvents:"auto"}},r.a.createElement("div",{style:{width:"10vw",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("span",{className:"brand_styling text_primary",style:{fontSize:30}},"BAVK"))),r.a.createElement("div",{style:{width:"80vw",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"}},r.a.createElement("input",{className:"text_primary",placeholder:"Search...",value:U.search||"",onChange:function(e){return Y(e.target.value,"search")},onKeyUp:function(e){return 13===e.keyCode&&V()},style:{background:"rgb(18,18,18)",borderTopLeftRadius:5,borderBottomLeftRadius:5,outline:"none",border:"1px solid rgb(48,48,48)",padding:"2px 10px",height:40,width:"40vw"}}),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{"data-toggle":"dropdown",style:{background:"rgb(48,48,48)",outline:"none",border:"none",borderRight:"0.5px solid rgb(80,80,80)",height:40,width:45,color:"lightblue"}},"members"===k?r.a.createElement(oe.l,null):"videos"===k?r.a.createElement(oe.g,null):"tags"===k&&r.a.createElement(oe.m,null)),r.a.createElement("div",{className:"dropdown-menu",style:{background:"ivory"}},r.a.createElement("div",{onClick:function(){return j("tags")},className:"dropdown-item",style:{display:"flex",alignItems:"center",cursor:"pointer",background:"tags"===k?"lightsteelblue":""}},r.a.createElement(oe.m,{style:{marginRight:7}}),"Streaming Rooms"),r.a.createElement("div",{onClick:function(){return j("videos")},className:"dropdown-item",style:{display:"flex",alignItems:"center",cursor:"pointer",background:"videos"===k?"lightsteelblue":""}},r.a.createElement(oe.g,{style:{marginRight:7}}),"Videos"),r.a.createElement("div",{onClick:function(){return j("members")},className:"dropdown-item",style:{display:"flex",alignItems:"center",cursor:"pointer",background:"members"===k?"lightsteelblue":""}},r.a.createElement(oe.l,{style:{marginRight:7}}),"Members"))),r.a.createElement("button",{onClick:V,style:{background:"rgb(48,48,48)",outline:"none",border:"none",height:40,width:45,borderTopRightRadius:5,borderBottomRightRadius:5,color:"lightblue"}},r.a.createElement(oe.j,null))),r.a.createElement("div",{style:{width:"10vw",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"}},D?r.a.createElement("div",{className:"dropdown menu_user"},r.a.createElement("button",{className:"btn btn-outline-primary dropdown-toggle","data-toggle":"dropdown",style:{background:"rgb(18,18,18)"}},T.nickname),r.a.createElement("div",{className:"dropdown-menu",style:{background:"ivory"}},r.a.createElement("div",{className:"dropdown-item disabled"},"Tokens ",T.token||"0"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("h5",{className:"dropdown-header"},"Managements"),r.a.createElement(c.b,{to:"/profile/".concat(T.nickname,"#profile")},r.a.createElement("div",{className:"dropdown-item"},"Profile")),r.a.createElement(c.b,{to:"/profile/".concat(T.nickname,"#channel")},r.a.createElement("div",{className:"dropdown-item"},"Channel")),r.a.createElement(c.b,{to:"/profile/".concat(T.nickname,"#history_donate")},r.a.createElement("div",{className:"dropdown-item"},"History")),r.a.createElement("h5",{className:"dropdown-header"},"Feature"),r.a.createElement(c.b,{to:"/members"},r.a.createElement("div",{className:"dropdown-item"},"List Members")),r.a.createElement(c.b,{to:"/videos"},r.a.createElement("a",{className:"dropdown-item"},"List Videos")),"STREAMER"===T.role_user&&r.a.createElement(c.b,{to:"/streamer"},r.a.createElement("div",{className:"dropdown-item"},"Go Live")),"VIEWER"===T.role_user&&r.a.createElement("div",{onClick:function(){return e="Confirm",t="Enable Streamer Mode?",a=H,void Object(Xe.confirmAlert)({title:e,message:t,buttons:[{label:"Yes",onClick:a},{label:"No",onClick:n}]});var e,t,a,n},className:"dropdown-item href_style_text"},"Enable Live"),r.a.createElement("div",{onClick:function(){window.open("/purchase_options","","scrollbars=yes,width=650,height=600")},className:"dropdown-item href_style_text"},"Buy Tokens"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("div",{onClick:function(){localStorage.clear(),sessionStorage.clear(),de("info","Logout"),setTimeout((function(){return window.location.reload()}),1e3)},className:"dropdown-item href_style_text"},"Logout"))):r.a.createElement("button",{onClick:function(){return W("LOGIN")},className:"btn btn-outline-primary",style:{background:"rgb(18,18,18)"}},"Login"))),r.a.createElement(Ee.a,{open:o,onClose:function(){return i(!1)},center:!0},r.a.createElement("div",{style:{padding:"auto",width:400,minHeight:400,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px"}},"LOGIN"===p.type?r.a.createElement("form",{onSubmit:q,style:{display:"flex",flexDirection:"column",width:"80%"}},r.a.createElement("h2",{style:{textAlign:"center",fontWeight:"bold"}},"Login"),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Username"),r.a.createElement("input",{type:"text",className:"form-control",value:U.username,onChange:function(e){return Y(e.target.value,"username")},placeholder:"Username...",required:!0})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Password"),r.a.createElement("input",{type:"password",className:"form-control",value:U.password,onChange:function(e){return Y(e.target.value,"password")},placeholder:"Password...",required:!0})),r.a.createElement("p",{onClick:function(){return M("RESET")},className:"href_style_text",style:{color:"rgb(21,127,251)"}},"Forgot password?"),r.a.createElement("p",{onClick:function(){return M("REGISTER")},className:"href_style_text",style:{color:"rgb(21,127,251)"}},"Create account?"),r.a.createElement("button",{type:"submit",style:{fontSize:"20px",background:"rgb(21,127,251)",color:"whitesmoke",borderRadius:"4px"}},"Login")):"REGISTER"===p.type?r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"80%"}},r.a.createElement("h2",{style:{textAlign:"center",fontWeight:"bold"}},"Register"),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Nickname"),r.a.createElement("input",{type:"text",className:"form-control",value:U.nickname,onChange:function(e){return Y(e.target.value,"nickname")},placeholder:"Nickname..."})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Email"),r.a.createElement("input",{type:"email",className:"form-control",value:U.email,onChange:function(e){return Y(e.target.value,"email")},placeholder:"Email..."})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Username"),r.a.createElement("input",{type:"text",className:"form-control",value:U.username,onChange:function(e){return Y(e.target.value,"username")},placeholder:"Username..."})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Password"),r.a.createElement("input",{type:"password",className:"form-control",value:U.password,onChange:function(e){return Y(e.target.value,"password")},placeholder:"Password..."})),r.a.createElement("p",{onClick:function(){return M("LOGIN")},className:"href_style_text",style:{color:"rgb(21,127,251)"}},"Already have an account?"),r.a.createElement("button",{onClick:G,type:"submit",style:{fontSize:"20px",background:"rgb(21,127,251)",color:"whitesmoke",borderRadius:"4px"}},"Register")):"RESET"===p.type&&r.a.createElement("form",{onSubmit:K,style:{display:"flex",flexDirection:"column",width:"80%"}},r.a.createElement("h2",{style:{textAlign:"center",fontWeight:"bold"}},"Reset Password"),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{style:{fontWeight:"bold"}},"Email"),r.a.createElement("input",{type:"text",className:"form-control",value:U.email,onChange:function(e){return Y(e.target.value,"email")},placeholder:"Email...",required:!0})),r.a.createElement("p",{onClick:function(){return M("LOGIN")},className:"href_style_text",style:{color:"rgb(21,127,251)"}},"Back to login?"),r.a.createElement("button",{type:"submit",style:{fontSize:"20px",background:"rgb(21,127,251)",color:"whitesmoke",borderRadius:"4px"}},"Reset")))))}),$e=function(e){Object(Ve.a)(e);var t=Object(n.useState)(""),a=Object(m.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)({}),s=Object(m.a)(c,2),l=s[0],p=s[1],f=function(e,t){p(Object(v.a)(Object(v.a)({},l),{},Object(Qe.a)({},t,e)))},h=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge(!0),e.prev=1,t=l.password,a=l.confirmpassword,t===a){e.next=6;break}return de("warn","Password confirmation does not match!"),e.abrupt("return");case 6:return e.next=8,T({password:null===t||void 0===t?void 0:t.trim()},o);case 8:200===(n=e.sent).status?(p({}),de("info",n.msg)):de("error",n.msg),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:ge(!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i(x("jwt")||"")}),[]),r.a.createElement("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}},r.a.createElement("div",{style:{}},r.a.createElement("h4",{className:"text_primary"},"Reset Password"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text_primary"},"New Password:"),r.a.createElement("input",{type:"text",className:"form-control",value:l.password||"",onChange:function(e){return f(e.target.value,"password")},placeholder:"Password..."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text_primary"},"Confirm New Password:"),r.a.createElement("input",{className:"form-control",value:l.confirmpassword||"",onChange:function(e){return f(e.target.value,"confirmpassword")},placeholder:"Confirm password..."})),r.a.createElement("button",{onClick:h,className:"btn btn-primary btn-block"},"Reset")))},et=a(347),tt=a.n(et),at=function(){return r.a.createElement("footer",{style:{zIndex:10,marginTop:20,pointerEvents:"none"}},r.a.createElement("div",{style:{background:"rgb(33,37,49)",opacity:.8,height:400,borderTop:"1px solid #777",padding:55,overflow:"hidden"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"no-wrap"}},r.a.createElement("div",null,r.a.createElement("img",{src:tt.a,alt:"",style:{width:80,height:80,borderRadius:10,objectFit:"cover"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"33px",pointerEvents:"auto"}},r.a.createElement("p",{style:{color:"lightsalmon",fontWeight:"bold"}},"BAVK Live Streaming"),r.a.createElement(c.b,{to:"/"},r.a.createElement("p",{className:"text_primary"},"Home")),r.a.createElement(c.b,{to:"/videos"},r.a.createElement("p",{className:"text_primary"},"Videos")),r.a.createElement(c.b,{to:"/members"},r.a.createElement("p",{className:"text_primary"},"Members")),r.a.createElement("div",{className:"href_style_text",onClick:function(){window.open("/purchase_options","","scrollbars=yes,width=650,height=600")}},r.a.createElement("p",{className:"text_primary"},"Buy Tokens"))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"33px",pointerEvents:"auto"}},r.a.createElement("p",{style:{color:"lightsalmon",fontWeight:"bold"}},"Resources"),r.a.createElement(c.b,{to:"/"},r.a.createElement("p",{className:"text_primary"},"Stripe")),r.a.createElement(c.b,{to:"/"},r.a.createElement("p",{className:"text_primary"},"Videojs")),r.a.createElement(c.b,{to:"/"},r.a.createElement("p",{className:"text_primary"},"Socket"))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"33px",pointerEvents:"auto"}},r.a.createElement("p",{style:{color:"lightsalmon",fontWeight:"bold"}},"Contact"),r.a.createElement("p",{style:{color:"white"}},r.a.createElement(oe.e,null)," bavklivestreaming@gmail.com"))),r.a.createElement("h5",{style:{color:"white",textAlign:"center",marginTop:40}},"Copyright \xa9 2021 BAVK Team")))},nt=a(81),rt=a(348),ot=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/payment/purchase_token",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(t)},e.next=3,fetch("https://bavk-api.herokuapp.com/api/payment/donate_token",n);case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ct=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("https://bavk-api.herokuapp.com/api/payment/options_purchase",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st={iconStyle:"solid",style:{base:{iconColor:"#c4f0ff",color:"white",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"#87bbfd"}},invalid:{iconColor:"#ffc7ee",color:"#ffc7ee"}}};function lt(){var e=Object(nt.useStripe)(),t=Object(nt.useElements)(),a=Object(n.useState)(!1),o=Object(m.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)({}),l=Object(m.a)(s,2),p=l[0],f=l[1],v=Object(n.useState)({}),h=Object(m.a)(v,2),b=h[0],g=h[1],y=function(){var a=Object(d.a)(u.a.mark((function a(n){var r,o,s,l,d,m,f,v,h;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!i){a.next=3;break}return a.abrupt("return");case 3:return ge(!0),c(!0),a.prev=5,a.next=8,e.createPaymentMethod({type:"card",card:t.getElement(nt.CardElement)});case 8:if(r=a.sent,o=r.error,s=r.paymentMethod,o){a.next=27;break}return a.prev=12,l=s.id,d=p.currency,m=p.amount,f=p.token,v={id:l,currency:d,amount:Math.ceil(100*m),token:+f,nickname:b.nickname,email:b.email,idUser:b.id},a.next=18,ot(v);case 18:200===(h=a.sent).status?window.close():de("error",h.msg),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(12),de("error",a.t0);case 25:a.next=28;break;case 27:de("error",o.message);case 28:a.next=33;break;case 30:a.prev=30,a.t1=a.catch(5),de("error",a.t1);case 33:ge(!1),c(!1);case 35:case"end":return a.stop()}}),a,null,[[5,30],[12,22]])})));return function(e){return a.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,g(t||{});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=x("amount"),t=x("currency"),a=x("token");E(),f({amount:e,currency:t,token:a})}),[]),r.a.createElement("form",{onSubmit:y,style:{position:"fixed",top:0,left:0,background:"rgb(85,107,205)",height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",zIndex:5e3}},r.a.createElement("p",null,"4242424242424242"),r.a.createElement("h1",{style:{color:"white"}},"Payment"),r.a.createElement("span",{style:{color:"white",fontSize:16}},"Purchase $",p.amount||"0"," for ",p.token||"0"," tokens"),r.a.createElement("div",{style:{width:"70%",background:"rgb(112,144,232)",padding:10,borderRadius:5,marginBottom:20}},r.a.createElement(nt.CardElement,{options:st})),r.a.createElement("button",{disabled:i,type:"submit",style:{width:"70%",padding:10,borderRadius:5,outline:"none",border:"none",background:"rgb(214,147,216)",color:"white"}},"Pay $",p.amount||"0"))}var ut=Object(rt.a)("pk_test_51IuDXGJefHKSb0l8o5FJglhe65YLVctYknMaHW2ophK3U6Cps4Fa1ah14PjWMhPhIoecrhnyFAMYvku5Al7IjqAx005eXf5nZS");var dt=function(){return r.a.createElement(nt.Elements,{stripe:ut},r.a.createElement(lt,null))};a(419);function mt(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),c=Object(m.a)(i,2),s=c[0],l=c[1],p=function(e,t){o(Object(v.a)(Object(v.a)({},a),{},Object(Qe.a)({},t,e)))},f=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:t=e.sent,l((null===t||void 0===t?void 0:t.data)||[]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),de("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),r.a.createElement("div",{style:{background:"rgb(85,107,205)",position:"fixed",top:0,left:0,zIndex:1e5,height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{background:"white",width:"95%",height:"95%",borderRadius:10,padding:20}},r.a.createElement("h4",null,"Token Options"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"flex",alignItems:"center"}},r.a.createElement("input",{type:"radio",name:"option",onChange:function(){return p(e,"option")}}),r.a.createElement("span",{style:{marginLeft:5}},e.name))}))),r.a.createElement("h4",null,"Payment Options"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},["USD"].map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"flex",alignItems:"center"}},r.a.createElement("input",{type:"radio",name:"currency",onChange:function(){return p(e,"currency")}}),r.a.createElement("span",{style:{marginLeft:5}},e))}))),r.a.createElement("button",{disabled:!a.option||!a.currency,onClick:function(){var e=a.currency,t=a.option;window.location.href="/buy_tokens?token=".concat(null===t||void 0===t?void 0:t.token,"&amount=").concat(null===t||void 0===t?void 0:t.amount,"&currency=").concat(e)},style:{background:a.option&&a.currency?"lightcoral":"gray"}},"Continue")))}a(291);var pt,ft=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),s=Object(m.a)(i,2),l=s[0],p=s[1],f=Object(n.useState)(!1),v=Object(m.a)(f,2),h=v[0],b=v[1],E=Object(n.useState)({}),w=Object(m.a)(E,2),k=w[0],j=w[1],O=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),ge(!0),e.prev=2,e.next=5,A();case 5:return t=e.sent,j(t||{}),e.t0=b,e.next=10,I();case 10:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=14,fetch("https://bavk-api.herokuapp.com/api/stream/videos_all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:x("q")?decodeURI(x("q")):null})});case 14:return a=e.sent,e.next=17,a.json();case 17:n=e.sent,o(n.data||[]),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(2),console.log(e.t2);case 24:p(!1),ge(!1);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){O()}),[]),r.a.createElement("div",{style:{padding:20,width:"95%",margin:"auto",marginTop:5}},h||l?(null===a||void 0===a?void 0:a.length)>0?r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px,auto))",gridGap:15,justifyContent:"center",pointerEvents:"auto"}},a.map((function(e,t){var a,n;return r.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",borderRadius:10,width:340}},r.a.createElement(c.b,{to:"/video/".concat(k.nickname,"?id=").concat(e.id)},r.a.createElement("img",{src:e.thumbnail?g+e.thumbnail:Ce.a,alt:"",style:{width:340,height:210,borderRadius:5,objectFit:"cover"}})),r.a.createElement("div",{style:{display:"flex",paddingLeft:7,marginTop:10,widht:"100%"}},r.a.createElement(c.b,{to:"/video/".concat(k.nickname,"?id=").concat(e.id),style:{display:"flex",width:"90%"}},r.a.createElement("img",{src:e.photo?y+e.photo:Ke.a,alt:"",style:{width:35,height:35,borderRadius:"50%",marginRight:10,objectFit:"cover"}}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},r.a.createElement("span",{className:"text_primary",style:{fontWeight:"bold",fontSize:17,wordBreak:"break-all",lineHeight:"20px"}},(null===(a=e.title)||void 0===a?void 0:a.length)>30?(null===(n=e.title)||void 0===n?void 0:n.slice(0,20))+"...":e.title),r.a.createElement("span",{className:"text_primary",style:{fontSize:14}},e.nickname),r.a.createElement("span",{className:"text_primary",style:{fontSize:12,fontStyle:"itatlic"}},Oe()(e.created_at).startOf("min").fromNow())))))}))):r.a.createElement(ye,{text:"No Videos Found"}):r.a.createElement(ye,{text:"Login Required"}))},vt=a(142),ht=function(){var e=Object(n.useState)(-1),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)({}),c=Object(m.a)(i,2),s=c[0],l=c[1],p=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.prev=1,e.next=4,A();case 4:t=e.sent,l(t||{}),o(x("id")||-1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:ge(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),r.a.createElement("div",{className:"watch",style:{pointerEvents:"auto"}},r.a.createElement("div",{className:"back"},r.a.createElement(vt.a,null),"Home"),-1!==a&&r.a.createElement("video",{className:"video",autoPlay:!0,progress:!0,controls:!0,src:"".concat("https://bavk-api.herokuapp.com/api/video","?idVideo=").concat(a,"&idUser=").concat(s.id)}))},bt=function(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),l=s[0],p=s[1],f=Object(n.useState)([]),v=Object(m.a)(f,2),h=v[0],b=v[1],g=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),o(!0),e.t0=p,e.next=5,I();case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,Me({search:x("q")?decodeURI(x("q")):null});case 9:200===(t=e.sent).status&&b(t.data||[]),ge(!1),o(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g()}),[]),r.a.createElement(r.a.Fragment,null,l||a?!a&&r.a.createElement("div",{style:{width:"95%",marginLeft:"auto",marginRight:"auto",marginTop:10,zIndex:100,pointerEvents:"auto"}},r.a.createElement("h3",{style:{color:"lightgreen"}},"Users (",(null===h||void 0===h?void 0:h.length)||"0",")"),h.length>0?r.a.createElement("div",{style:{display:"grid",gridGap:5,gridTemplateColumns:"repeat(auto-fill, minmax(180px,auto))"}},h.map((function(e,t){return r.a.createElement(c.b,{to:"/profile/".concat(e.nickname)},r.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("img",{src:e.photo?y+e.photo:Ke.a,alt:"",style:{width:180,height:180,objectFit:"cover",borderRadius:10}}),r.a.createElement("p",{className:"text_primary",style:{textAlign:"center"}},e.nickname)))}))):r.a.createElement(ye,{text:"No Users Found"})):r.a.createElement(ye,{text:"Login Required"}))},gt=(a(292),a(349)),yt=a.n(gt),Et=a(350),xt=a.n(Et),wt=function(e){var t=e.videos,a=e.index,o=e.updateTitleVideo,i=Object(n.useState)({}),c=Object(m.a)(i,2),s=c[0],l=c[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),h=f[0],b=f[1],g=function(){return b(!1)};Object(n.useEffect)((function(){l(JSON.parse(JSON.stringify(t)))}),[]);var y=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.prev=1,e.next=4,fetch("https://bavk-api.herokuapp.com/api/stream/update_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:s.id,title:s.title})});case 4:200===e.sent.status?(de("info","Updated Successfully"),g(),o(a,s.title)):de("info","Update Failed"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:ge(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return b(!0)},className:"dropdown-item",style:{display:"flex",alignItems:"center",cursor:"pointer"}},r.a.createElement(oe.d,{style:{marginRight:5}})," Update"),r.a.createElement(Ee.a,{open:h,center:!0,onClose:g},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:kt},r.a.createElement("div",{style:jt},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{value:s.title||"",name:"title",onChange:function(e){return t=e.target.value,a="title",void l(Object(v.a)(Object(v.a)({},s),{},Object(Qe.a)({},a,t)));var t,a},style:Ot})),r.a.createElement("button",{onClick:y,className:"btn btn-primary",style:{width:"100%",marginTop:15}},"Update")))))},kt={padding:20,marginRight:20,width:"30vw"},jt={display:"flex",flexDirection:"column",fontWeight:"bold",width:"100%"},Ot={borderRadius:5,padding:5,width:"100%",border:"1px solid #bdc3c7"},Nt={},St="",_t=function(e){var t=e.match,a=Object(n.useState)(""),o=Object(m.a)(a,2),i=o[0],l=o[1],p=Object(n.useState)(!0),f=Object(m.a)(p,2),h=f[0],b=f[1],E=Object(n.useState)(""),x=Object(m.a)(E,2),w=x[0],k=x[1],j=Object(n.useState)({}),O=Object(m.a)(j,2),N=O[0],S=O[1],_=Object(n.useState)([]),C=Object(m.a)(_,2),T=C[0],R=C[1],I=Object(n.useState)([]),F=Object(m.a)(I,2),B=F[0],D=F[1],P=Object(n.useState)(!1),z=Object(m.a)(P,2),L=(z[0],z[1]),U=Object(s.f)(),J=Object(n.useRef)(null),W=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.next=3,Ue(N);case 3:200===(t=e.sent).status?(de("info",t.msg),w!==N.nickname&&setTimeout((function(){return window.location.href="/profile/".concat(N.nickname)}),1e3)):de("error",t.msg),ge(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e,t){T[e].title=t,L((function(e){return!e}))},q=function(e,t){var a,n;"nickname"===t&&(e=null===(a=e)||void 0===a||null===(n=a.replace(/\s/g,"_"))||void 0===n?void 0:n.trim());S(Object(v.a)(Object(v.a)({},N),{},Object(Qe.a)({},t,e)))},G=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://bavk-api.herokuapp.com/api/stream/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,R(n.data||[]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.prev=1,e.next=4,fetch("https://bavk-api.herokuapp.com/api/stream/delete_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:t})});case 4:200===e.sent.status?(de("info","Deleted Successfully"),G(a.streamer_id)):de("info","Delete Failed"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:ge(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.prev=1,t={host_id:Nt.id,follower_id:N.id,isSubscribed:N.isSubscribed},e.next=5,Pe(t);case 5:200===(a=e.sent).status?(S(Object(v.a)(Object(v.a)({},N),{},{isSubscribed:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.isSubscribed})),de("info",a.msg)):de("error",a.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:ge(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){try{switch(e){case"#profile":document.querySelector("#nav-profile-tab").click();break;case"#channel":document.querySelector("#nav-video-tab").click();break;case"#history_donate":document.querySelector("#nav-history-tab").click()}}catch(t){console.log(t)}},Y=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ge(!0),b(!0),e.next=5,A();case 5:if(void 0!==(null===(n=e.sent)||void 0===n?void 0:n.id)){e.next=9;break}return b(!1),e.abrupt("return");case 9:return e.next=11,Le(null===t||void 0===t||null===(a=t.params)||void 0===a?void 0:a.nickname,n.id);case 11:return r=e.sent,Nt.id=null===n||void 0===n?void 0:n.id,S(r),k((null===r||void 0===r?void 0:r.nickname)||""),e.t0=D,e.next=18,We(r.id);case 18:e.t1=e.sent,(0,e.t0)(e.t1),l((null===r||void 0===r?void 0:r.photo)?y+(null===r||void 0===r?void 0:r.photo):Ke.a),G(r.id),ge(!1),St=window.location.pathname,b(!1),o=window.location.hash,K(o),e.next=32;break;case 29:e.prev=29,e.t2=e.catch(0),console.log(e.t2);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return Y(),U.listen((function(e){e.hash!==window.location.hash||""===e.hash&&""===window.location.hash||(window.location.pathname!==St?window.location.reload():K(null===e||void 0===e?void 0:e.hash))}))}),[U]),r.a.createElement(r.a.Fragment,null,void 0!==Nt.id||h?void 0===(null===N||void 0===N?void 0:N.id)||h?!h&&r.a.createElement(ye,{text:"No User Found"}):r.a.createElement("div",{className:"row",style:{marginTop:20,pointerEvents:"auto"}},r.a.createElement("div",{className:"col-12 "},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav nav-tabs nav-fill",id:"nav-tab",role:"tablist"},r.a.createElement("a",{onClick:function(){return window.location.hash="#profile"},className:"text_primary nav-item nav-link",id:"nav-profile-tab","data-toggle":"tab",href:"#nav-home",role:"tab","aria-controls":"nav-home","aria-selected":"true"},"Profile"),r.a.createElement("a",{onClick:function(){return window.location.hash="#channel"},className:"text_primary nav-item nav-link",id:"nav-video-tab","data-toggle":"tab",href:"#nav-profile",role:"tab","aria-controls":"nav-profile","aria-selected":"false"},"Videos"),N.id===Nt.id&&r.a.createElement("a",{onClick:function(){return window.location.hash="#history_donate"},className:"text_primary nav-item nav-link",id:"nav-history-tab","data-toggle":"tab",href:"#nav-contact",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},"History"))),r.a.createElement("div",{className:"tab-content py-3 px-3 px-sm-0",id:"nav-tabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-profile-tab",style:{marginTop:20}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:Ct},r.a.createElement("div",{style:At},r.a.createElement("div",{style:Rt},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{value:(null===N||void 0===N?void 0:N.username)||"",style:It,disabled:!0})),r.a.createElement("div",{style:Rt},r.a.createElement("label",null,"Email address:"),r.a.createElement("input",{value:(null===N||void 0===N?void 0:N.email)||"",style:It,disabled:!0})),r.a.createElement("div",{style:Rt},r.a.createElement("label",null,"Full name:"),r.a.createElement("input",{disabled:N.id!==Nt.id,value:(null===N||void 0===N?void 0:N.fullname)||"",onChange:function(e){return q(e.target.value,"fullname")},style:It})),r.a.createElement("div",{style:Rt},r.a.createElement("label",null,"Nickname:"),r.a.createElement("input",{disabled:N.id!==Nt.id,value:(null===N||void 0===N?void 0:N.nickname)||"",onChange:function(e){return q(e.target.value,"nickname")},style:It}))),r.a.createElement("textarea",{hidden:N.id!==Nt.id,value:(null===N||void 0===N?void 0:N.bio)||"",onChange:function(e){return q(e.target.value,"bio")},placeholder:"bio",style:{width:"100%",padding:10,height:100,marginTop:15}}),r.a.createElement("button",{hidden:N.id!==Nt.id,onClick:W,className:"btn btn-primary",style:{width:"100%",marginTop:15}},"Save"),N.id!==Nt.id&&r.a.createElement("button",{onClick:H,className:"btn btn-primary",style:{width:"100%",marginTop:25}},r.a.createElement(oe.i,null),"  ",N.isSubscribed>0?"Unfollow":"Follow")),r.a.createElement("div",{style:Tt},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{position:"relative",width:150,height:150}},r.a.createElement("img",{src:i,alt:"",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}),r.a.createElement("button",{hidden:N.id!==Nt.id,onClick:function(){var e;return null===J||void 0===J||null===(e=J.current)||void 0===e?void 0:e.click()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}}),r.a.createElement("input",{ref:J,type:"file",onChange:function(e){ge(!0);try{if(e.target.files&&e.target.files[0]){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=Object(d.a)(u.a.mark((function a(){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={fileName:"".concat(N.id,".png"),imageBase64:t.result,user_id:N.id},a.next=3,ze(n);case 3:200===(r=a.sent).status?(de("info",r.msg),l(URL.createObjectURL(e.target.files[0]))):de("error",r.msg);case 5:case"end":return a.stop()}}),a)})))}}catch(a){console.log(a)}ge(!1)},style:{display:"none"}}))),r.a.createElement("div",{style:{marginTop:10,display:"flex",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("div",{style:Ft},r.a.createElement("p",{style:Bt},"Followers"),r.a.createElement("p",{style:Dt},(null===N||void 0===N?void 0:N.followers)||"0")),r.a.createElement("div",{style:Ft},r.a.createElement("p",{style:Bt},"Videos"),r.a.createElement("p",{style:Dt},(null===N||void 0===N?void 0:N.videos)||"0")),N.id===Nt.id&&r.a.createElement("div",{style:Ft},r.a.createElement("p",{style:Bt},"Token"),r.a.createElement("p",{style:Dt},(null===N||void 0===N?void 0:N.token)||"0"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("p",{style:{wordBreak:"break-all"}},null===N||void 0===N?void 0:N.bio))))),r.a.createElement("div",{className:"tab-pane fade",id:"nav-profile",role:"tabpanel","aria-labelledby":"nav-video-tab"},r.a.createElement("div",{style:{padding:20,width:"95%",margin:"auto",marginTop:5}},(null===T||void 0===T?void 0:T.length)>0?r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px,auto))",gridGap:15,justifyContent:"center"}},T.map((function(e,t){var a,n;return r.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",borderRadius:10,width:340}},r.a.createElement(c.b,{to:"/video/".concat(N.nickname,"?id=").concat(e.id)},r.a.createElement("img",{src:e.thumbnail?g+e.thumbnail:Ce.a,alt:"",style:{width:340,height:210,borderRadius:5,objectFit:"cover"}})),r.a.createElement("div",{style:{display:"flex",paddingLeft:7,marginTop:10,widht:"100%"}},r.a.createElement(c.b,{to:"/video/".concat(N.nickname,"?id=").concat(e.id),style:{display:"flex",width:"90%"}},r.a.createElement("img",{src:e.photo?y+e.photo:Ke.a,alt:"",style:{width:35,height:35,borderRadius:"50%",marginRight:10,objectFit:"cover"}}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},r.a.createElement("span",{className:"text_primary",style:{fontWeight:"bold",fontSize:17,wordBreak:"break-all",lineHeight:"20px"}},(null===(a=e.title)||void 0===a?void 0:a.length)>30?(null===(n=e.title)||void 0===n?void 0:n.slice(0,20))+"...":e.title),r.a.createElement("span",{className:"text_primary",style:{fontSize:14}},e.nickname),r.a.createElement("span",{className:"text_primary",style:{fontSize:12,fontStyle:"itatlic"}},Oe()(e.created_at).startOf("min").fromNow()))),N.id===e.streamer_id&&r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{"data-toggle":"dropdown",style:{background:"transparent",outline:"none",border:"none",color:"lightblue",cursor:"pointer"}},r.a.createElement(oe.b,{className:"text_primary"})),r.a.createElement("div",{className:"dropdown-menu",style:{background:"ivory"}},r.a.createElement(wt,{videos:e,index:t,updateTitleVideo:M}),r.a.createElement("div",{onClick:function(){return V(e.id,e)},className:"dropdown-item",style:{display:"flex",alignItems:"center",cursor:"pointer"}},r.a.createElement(vt.b,{style:{marginRight:5}})," Remove")))))}))):r.a.createElement(ye,{text:"No Videos Found"}))),r.a.createElement("div",{className:"tab-pane fade",id:"nav-contact",role:"tabpanel","aria-labelledby":"nav-history-tab",style:{marginTop:20}},r.a.createElement("div",{className:"col-10 m-auto",style:{background:"rgb(236, 240, 241)",borderRadius:10,padding:15}},r.a.createElement(yt.a,{keyField:"id",data:B,columns:Pt,pagination:xt()(zt),hover:!0,condensednoDataIndication:"Table is Empty"})))))):r.a.createElement(ye,{text:"Login Required"}))},Ct={borderRadius:10,boxShadow:"1px 1px 20px #aaaaaa",background:"#ecf0f1",width:"45%",padding:20,marginRight:20},Tt={borderRadius:10,boxShadow:"1px 1px 20px #aaaaaa",padding:20,background:"#ecf0f1",width:"35%"},At={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(48%,auto))",gridGap:10,alignItems:"center",justifyContent:"center"},Rt={display:"flex",flexDirection:"column",fontWeight:"bold",width:"100%"},It={borderRadius:5,padding:5,border:"1px solid #bdc3c7"},Ft={width:"33%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",lineHeight:1},Bt={fontSize:16,fontWeight:"bold"},Dt={fontSize:15},Pt=[{dataField:"STT",text:"STT"},{dataField:"sender",text:"T\xean ng\u01b0\u1eddi g\u1eedi "},{dataField:"receiver",text:"T\xean ng\u01b0\u1eddi nh\u1eadn"},{dataField:"token",text:"S\u1ed1 token"},{dataField:"created_at",text:"Ng\xe0y g\u1eedi"}],zt={paginationSize:4,pageStartIndex:1,alwaysShowAllBtns:!0,withFirstAndLast:!0,hideSizePerPage:!0,hidePageListOnlyOnePage:!1,firstPageText:"First",lastPageText:"Last",showTotal:!0,disablePageTitle:!0,sizePerPageList:[{text:"5",value:5},{text:"10",value:10}]},Lt=function(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),a=t[0],o=t[1],i=function(e,t){o(Object(v.a)(Object(v.a)({},a),{},Object(Qe.a)({},t,e)))},c=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(!0),pt=f()(b),o(Object(v.a)(Object(v.a)({},a),{},{jwt:x("q"),streamer_id:x("streamer_id"),streamer:x("streamer"),viewer:x("viewer")})),ge(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,o,i,c,s,l,d,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I()){e.next=3;break}return $.emit("login_required",{}),e.abrupt("return");case 3:return ge(!0),e.prev=4,t=a.quantity,n=a.streamer_id,r=a.jwt,o=a.message,i=a.streamer,c=a.viewer,s={quantity:+t,receiver:+n},e.next=9,it(s,r||"");case 9:200===(null===(l=e.sent)||void 0===l?void 0:l.status)?(de("info",l.msg),d="\ud83d\ude18\ud83e\udd23 ".concat(c," has donated ").concat(t," tokens to ").concat(i," \ud83d\udca5\ud83d\udca5\ud83d\udca5 ").concat(o),m="\ud83d\udcb0 has donated ".concat(t," tokens \ud83d\udcb0"),pt.emit("on_donate",{streamer:i,message:d,isDonate:!0}),pt.emit("sendMessage",{message:m,userChat:c,roomName:i,colorRand:j(),createdAt:Oe()()}),setTimeout((function(){return window.location.reload()}),1e3)):de("error",l.msg),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),de(e.t0);case 16:ge(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c()}),[]);var l=a.quantity,p=a.streamer_id,h=a.jwt,g=a.message,y=!l||!p||!h||!g;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"80%",margin:"auto",marginTop:20,pointerEvents:"auto"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"70%",height:400}},r.a.createElement("div",{style:{border:"1px solid black",borderRadius:5,background:"rgb(236, 240, 241)",padding:20,marginBottom:20}},r.a.createElement("h3",null,"Donation"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity"},"Token"),r.a.createElement("div",{id:"quantity",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:10,justifyContent:"center",marginBottom:20}},[10,20,40,100,200,500].map((function(e,t){return r.a.createElement("button",{key:t,className:"btn btn-outline-secondary",onClick:function(){return i(e,"quantity")}},e)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"other-token"},"Other token"),r.a.createElement("input",{type:"number",className:"form-control",id:"other-token",value:(null===a||void 0===a?void 0:a.quantity)||"",onChange:function(e){return i(e.target.value,"quantity")},placeholder:"Other..."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"message"},"Message"),r.a.createElement("textarea",{className:"form-control",id:"message",onChange:function(e){return i(e.target.value,"message")},style:{height:50},placeholder:"Message..."})))),r.a.createElement("div",{style:{width:"2%",height:400}}),r.a.createElement("div",{style:{width:"28%",height:400,background:"rgb(236, 240, 241)",border:"1px solid black",borderRadius:5,padding:20,display:"flex",flexDirection:"column",alignItems:"center"}},a.viewer||""," donated ",a.quantity||"{quantity}",r.a.createElement("p",{style:{textAlign:"center",wordBreak:"break-all",color:"blueviolet"}},a.message||"{message}"))),r.a.createElement("div",{style:{background:"rgb(236, 240, 241)",marginTop:20,display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid black",borderRadius:5,padding:20}},r.a.createElement("h3",null,"Donate ",r.a.createElement("span",{style:{color:"lightcoral"}},(null===a||void 0===a?void 0:a.quantity)||"0")," tokens to ",r.a.createElement("span",{style:{color:"lightcoral"}},(null===a||void 0===a?void 0:a.streamer)||"")),r.a.createElement("button",{onClick:s,className:"btn ".concat(y?"btn-outline-primary":"btn-primary"),disabled:y},"Donate")))))},Ut=a(351),Jt=a.n(Ut),Wt=function(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){return i(),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[]);var i=function(){o({width:"".concat(window.innerWidth,"px"),height:"".concat(window.innerHeight,"px")})};return r.a.createElement(Jt.a,{width:a.width,height:a.height,style:{position:"fixed"},params:{particles:{number:{value:150,density:{enable:!1}},size:{value:3,random:!0,anim:{speed:5,size_min:.5}},line_linked:{enable:!1},move:{random:!0,speed:2,direction:"top",out_mode:"out"}},interactivity:{events:{onhover:{enable:!1,mode:"bubble"},onclick:{enable:!0,mode:"repulse"}},modes:{bubble:{distance:300,duration:10,size:0,opacity:0},repulse:{distance:400,duration:10}}}}})};a(844),a(845),a(846),a(847),a(848),a(849);var Mt=function(){return r.a.createElement(c.a,null,r.a.createElement(s.a,{path:"/purchase_options",component:mt}),r.a.createElement(s.a,{path:"/buy_tokens",component:dt}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",width:"100%",height:"100%"}},r.a.createElement(ue,null),r.a.createElement(be,null),r.a.createElement(ne,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%",height:"100%"}},r.a.createElement(Wt,null),r.a.createElement(Ze,null),r.a.createElement("div",{style:{zIndex:1e3,pointerEvents:"none"}},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:Ye}),r.a.createElement(s.a,{path:"/donation",component:Lt}),r.a.createElement(s.a,{path:"/videos",component:ft}),r.a.createElement(s.a,{path:"/members",component:bt}),r.a.createElement(s.a,{path:"/reset_password",component:$e}),r.a.createElement(s.a,{path:"/streamer",component:De}),r.a.createElement(s.a,{path:"/profile/:nickname",component:_t}),r.a.createElement(s.a,{path:"/video/*",component:ht}),r.a.createElement(s.a,{path:"/user/*",component:Ge}),r.a.createElement(s.a,{path:"*",component:function(){return r.a.createElement(ye,{text:"Page Not Found"})}}))),r.a.createElement(at,null))))},qt=a(113),Gt=a(352),Vt=a(199);var Ht=function(e,t){var a={roomTags:W,credentials:N},n=[Gt.a,Object(Vt.routerMiddleware)(e)],r=[],o=Object(qt.b)(Object(v.a)(Object(v.a)({},a),{},{routing:Vt.routerReducer}));return Object(qt.d)(o,t,qt.c.apply(void 0,[qt.a.apply(void 0,n)].concat(r)))}();i.a.render(r.a.createElement(xe.a,{store:Ht},r.a.createElement(Mt,null)),document.getElementById("root"))}},[[356,1,2]]]);
//# sourceMappingURL=main.a90d55e1.chunk.js.map